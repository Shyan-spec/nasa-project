{"ast":null,"code":"import { BLEEPS_CATEGORIES } from \"../constants.js\";\nimport { createBleep } from \"../createBleep/index.js\";\nimport { updateBleep } from \"../updateBleep/index.js\";\nimport { unloadBleep } from \"../unloadBleep/index.js\";\nimport { unloadBleeps } from \"../unloadBleeps/index.js\";\nconst createOrUpdateBleeps = (providedBleeps, audioSettings, playersSettings, bleepsSettings) => {\n  var _a;\n  const bleeps = providedBleeps !== null && providedBleeps !== void 0 ? providedBleeps : {};\n  if ((_a = audioSettings.common) === null || _a === void 0 ? void 0 : _a.disabled) {\n    unloadBleeps(bleeps);\n    return bleeps;\n  }\n  Object.keys(bleepsSettings).forEach(bleepName => {\n    var _a, _b, _c, _d;\n    const bleepSettings = bleepsSettings[bleepName];\n    if (!bleepSettings) {\n      unloadBleep(bleeps, bleepName);\n      return;\n    }\n    const bleepCategory = bleepSettings.category;\n    if (process.env.NODE_ENV !== 'production' && bleepCategory !== undefined && !BLEEPS_CATEGORIES.includes(bleepCategory)) {\n      throw new Error(`Bleep category \"${bleepCategory}\" is not valid.`);\n    }\n    const audioCategorySettings = (_a = audioSettings.categories) === null || _a === void 0 ? void 0 : _a[bleepCategory];\n    const processedAudioSettings = {\n      ...audioSettings.common,\n      ...audioCategorySettings\n    };\n    if (processedAudioSettings.disabled) {\n      unloadBleep(bleeps, bleepName);\n      return;\n    }\n    const playerSettings = playersSettings[bleepSettings.player];\n    if (!playerSettings) {\n      throw new Error(`Component bleep requires a provided player. Player \"${bleepSettings.player}\" was not found.`);\n    }\n    if (playerSettings.disabled) {\n      unloadBleep(bleeps, bleepName);\n      return;\n    }\n    // If a bleep has updated `src` or `format` settings, it should be re-created.\n    // Otherwise it is updated to be fast and prevent more HTTP requests.\n    const hasBleepUpdatedSrc = !!((_b = bleeps[bleepName]) === null || _b === void 0 ? void 0 : _b._settings.src.find((v, i) => v !== playerSettings.src[i]));\n    const hasBleepUpdatedFormat = !!((_d = (_c = bleeps[bleepName]) === null || _c === void 0 ? void 0 : _c._settings.format) === null || _d === void 0 ? void 0 : _d.find((v, i) => {\n      var _a;\n      return v !== ((_a = playerSettings.format) === null || _a === void 0 ? void 0 : _a[i]);\n    }));\n    if (bleeps[bleepName] && !hasBleepUpdatedSrc && !hasBleepUpdatedFormat) {\n      updateBleep(bleeps[bleepName], processedAudioSettings, playerSettings);\n    } else {\n      unloadBleep(bleeps, bleepName);\n      bleeps[bleepName] = createBleep(processedAudioSettings, playerSettings);\n    }\n  });\n  return bleeps;\n};\nexport { createOrUpdateBleeps };","map":{"version":3,"names":["BLEEPS_CATEGORIES","createBleep","updateBleep","unloadBleep","unloadBleeps","createOrUpdateBleeps","providedBleeps","audioSettings","playersSettings","bleepsSettings","_a","bleeps","common","disabled","Object","keys","forEach","bleepName","_b","_c","_d","bleepSettings","bleepCategory","category","process","env","NODE_ENV","undefined","includes","Error","audioCategorySettings","categories","processedAudioSettings","playerSettings","player","hasBleepUpdatedSrc","_settings","src","find","v","i","hasBleepUpdatedFormat","format"],"sources":["/Users/shyanw/Documents/Nasa-Project/client/node_modules/@arwes/bleeps/build/esm/createOrUpdateBleeps/createOrUpdateBleeps.js"],"sourcesContent":["import { BLEEPS_CATEGORIES } from \"../constants.js\";\nimport { createBleep } from \"../createBleep/index.js\";\nimport { updateBleep } from \"../updateBleep/index.js\";\nimport { unloadBleep } from \"../unloadBleep/index.js\";\nimport { unloadBleeps } from \"../unloadBleeps/index.js\";\nconst createOrUpdateBleeps = (providedBleeps, audioSettings, playersSettings, bleepsSettings) => {\n    var _a;\n    const bleeps = providedBleeps !== null && providedBleeps !== void 0 ? providedBleeps : {};\n    if ((_a = audioSettings.common) === null || _a === void 0 ? void 0 : _a.disabled) {\n        unloadBleeps(bleeps);\n        return bleeps;\n    }\n    Object.keys(bleepsSettings).forEach(bleepName => {\n        var _a, _b, _c, _d;\n        const bleepSettings = bleepsSettings[bleepName];\n        if (!bleepSettings) {\n            unloadBleep(bleeps, bleepName);\n            return;\n        }\n        const bleepCategory = bleepSettings.category;\n        if (process.env.NODE_ENV !== 'production' &&\n            bleepCategory !== undefined &&\n            !BLEEPS_CATEGORIES.includes(bleepCategory)) {\n            throw new Error(`Bleep category \"${bleepCategory}\" is not valid.`);\n        }\n        const audioCategorySettings = (_a = audioSettings.categories) === null || _a === void 0 ? void 0 : _a[bleepCategory];\n        const processedAudioSettings = {\n            ...audioSettings.common,\n            ...audioCategorySettings\n        };\n        if (processedAudioSettings.disabled) {\n            unloadBleep(bleeps, bleepName);\n            return;\n        }\n        const playerSettings = playersSettings[bleepSettings.player];\n        if (!playerSettings) {\n            throw new Error(`Component bleep requires a provided player. Player \"${bleepSettings.player}\" was not found.`);\n        }\n        if (playerSettings.disabled) {\n            unloadBleep(bleeps, bleepName);\n            return;\n        }\n        // If a bleep has updated `src` or `format` settings, it should be re-created.\n        // Otherwise it is updated to be fast and prevent more HTTP requests.\n        const hasBleepUpdatedSrc = !!((_b = bleeps[bleepName]) === null || _b === void 0 ? void 0 : _b._settings.src.find((v, i) => v !== playerSettings.src[i]));\n        const hasBleepUpdatedFormat = !!((_d = (_c = bleeps[bleepName]) === null || _c === void 0 ? void 0 : _c._settings.format) === null || _d === void 0 ? void 0 : _d.find((v, i) => { var _a; return v !== ((_a = playerSettings.format) === null || _a === void 0 ? void 0 : _a[i]); }));\n        if (bleeps[bleepName] && !hasBleepUpdatedSrc && !hasBleepUpdatedFormat) {\n            updateBleep(bleeps[bleepName], processedAudioSettings, playerSettings);\n        }\n        else {\n            unloadBleep(bleeps, bleepName);\n            bleeps[bleepName] = createBleep(processedAudioSettings, playerSettings);\n        }\n    });\n    return bleeps;\n};\nexport { createOrUpdateBleeps };\n"],"mappings":"AAAA,SAASA,iBAAiB,QAAQ,iBAAiB;AACnD,SAASC,WAAW,QAAQ,yBAAyB;AACrD,SAASC,WAAW,QAAQ,yBAAyB;AACrD,SAASC,WAAW,QAAQ,yBAAyB;AACrD,SAASC,YAAY,QAAQ,0BAA0B;AACvD,MAAMC,oBAAoB,GAAG,CAACC,cAAc,EAAEC,aAAa,EAAEC,eAAe,EAAEC,cAAc,KAAK;EAC7F,IAAIC,EAAE;EACN,MAAMC,MAAM,GAAGL,cAAc,KAAK,IAAI,IAAIA,cAAc,KAAK,KAAK,CAAC,GAAGA,cAAc,GAAG,CAAC,CAAC;EACzF,IAAI,CAACI,EAAE,GAAGH,aAAa,CAACK,MAAM,MAAM,IAAI,IAAIF,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACG,QAAQ,EAAE;IAC9ET,YAAY,CAACO,MAAM,CAAC;IACpB,OAAOA,MAAM;EACjB;EACAG,MAAM,CAACC,IAAI,CAACN,cAAc,CAAC,CAACO,OAAO,CAACC,SAAS,IAAI;IAC7C,IAAIP,EAAE,EAAEQ,EAAE,EAAEC,EAAE,EAAEC,EAAE;IAClB,MAAMC,aAAa,GAAGZ,cAAc,CAACQ,SAAS,CAAC;IAC/C,IAAI,CAACI,aAAa,EAAE;MAChBlB,WAAW,CAACQ,MAAM,EAAEM,SAAS,CAAC;MAC9B;IACJ;IACA,MAAMK,aAAa,GAAGD,aAAa,CAACE,QAAQ;IAC5C,IAAIC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,IACrCJ,aAAa,KAAKK,SAAS,IAC3B,CAAC3B,iBAAiB,CAAC4B,QAAQ,CAACN,aAAa,CAAC,EAAE;MAC5C,MAAM,IAAIO,KAAK,CAAE,mBAAkBP,aAAc,iBAAgB,CAAC;IACtE;IACA,MAAMQ,qBAAqB,GAAG,CAACpB,EAAE,GAAGH,aAAa,CAACwB,UAAU,MAAM,IAAI,IAAIrB,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACY,aAAa,CAAC;IACpH,MAAMU,sBAAsB,GAAG;MAC3B,GAAGzB,aAAa,CAACK,MAAM;MACvB,GAAGkB;IACP,CAAC;IACD,IAAIE,sBAAsB,CAACnB,QAAQ,EAAE;MACjCV,WAAW,CAACQ,MAAM,EAAEM,SAAS,CAAC;MAC9B;IACJ;IACA,MAAMgB,cAAc,GAAGzB,eAAe,CAACa,aAAa,CAACa,MAAM,CAAC;IAC5D,IAAI,CAACD,cAAc,EAAE;MACjB,MAAM,IAAIJ,KAAK,CAAE,uDAAsDR,aAAa,CAACa,MAAO,kBAAiB,CAAC;IAClH;IACA,IAAID,cAAc,CAACpB,QAAQ,EAAE;MACzBV,WAAW,CAACQ,MAAM,EAAEM,SAAS,CAAC;MAC9B;IACJ;IACA;IACA;IACA,MAAMkB,kBAAkB,GAAG,CAAC,EAAE,CAACjB,EAAE,GAAGP,MAAM,CAACM,SAAS,CAAC,MAAM,IAAI,IAAIC,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACkB,SAAS,CAACC,GAAG,CAACC,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,KAAKN,cAAc,CAACI,GAAG,CAACG,CAAC,CAAC,CAAC,CAAC;IACzJ,MAAMC,qBAAqB,GAAG,CAAC,EAAE,CAACrB,EAAE,GAAG,CAACD,EAAE,GAAGR,MAAM,CAACM,SAAS,CAAC,MAAM,IAAI,IAAIE,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACiB,SAAS,CAACM,MAAM,MAAM,IAAI,IAAItB,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACkB,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;MAAE,IAAI9B,EAAE;MAAE,OAAO6B,CAAC,MAAM,CAAC7B,EAAE,GAAGuB,cAAc,CAACS,MAAM,MAAM,IAAI,IAAIhC,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAAC8B,CAAC,CAAC,CAAC;IAAE,CAAC,CAAC,CAAC;IACtR,IAAI7B,MAAM,CAACM,SAAS,CAAC,IAAI,CAACkB,kBAAkB,IAAI,CAACM,qBAAqB,EAAE;MACpEvC,WAAW,CAACS,MAAM,CAACM,SAAS,CAAC,EAAEe,sBAAsB,EAAEC,cAAc,CAAC;IAC1E,CAAC,MACI;MACD9B,WAAW,CAACQ,MAAM,EAAEM,SAAS,CAAC;MAC9BN,MAAM,CAACM,SAAS,CAAC,GAAGhB,WAAW,CAAC+B,sBAAsB,EAAEC,cAAc,CAAC;IAC3E;EACJ,CAAC,CAAC;EACF,OAAOtB,MAAM;AACjB,CAAC;AACD,SAASN,oBAAoB"},"metadata":{},"sourceType":"module","externalDependencies":[]}